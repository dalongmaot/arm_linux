# 电子工业中自动光学检测和质量监测方法的回顾与分析



## 摘要

​		电子行业是发展最快、创新最多、竞争最激烈的行业之一。为了满足对电子元件的高消费需求，产品的质量标准必须保持良好。自动光学检测（AOI）是用于各种产品的质量检测的==非破坏性技术之一==。这种技术被认为是稳健的，可以取代在执行检查任务时受到枯燥和疲劳的人类检查员。一个全自动的光学检测系统由硬件和软件设置组成。硬件设置包括图像传感器和照明设置，并负责获取数字图像，而软件部分实现检测算法，以提取所获图像的特征，并根据用户要求将其分为有缺陷和无缺陷。可以使用一个分拣机制将有缺陷的产品与好的产品分开。本文对电子、微电子和光电子行业使用的各种AOI系统进行了全面的回顾。在这篇评论中，首先解释了通常被检查的电子元件的缺陷，如半导体晶圆、平板显示器、印刷电路板和发光二极管。然后讨论了用于获取图像的硬件设置，包括相机和照明源的选择和配置。用于检测电子元件缺陷的检测算法在用于此目的的预处理、特征提取和分类工具方面被讨论。文章最后强调了当前的趋势和未来可能的研究方向，并回顾了最近使用深度学习算法的文章。

### 关键词

自动光学检测，分类算法，电子工业，特征提取，图像处理，图像传感器，机器学习，机器视觉。



## I. 简介

​		有缺陷的产品会增加成本并使制造过程恶化[1]。及时和准确地检测缺陷有助于工业界应用质量控制和稳定策略，以保持在竞争中的优势[2]。目前，一些质量监测方法，如超声波检测、涡流检测、染料渗透检测、热成像、电路探针、X射线和光学检测，都被用来评估产品质量，以达到100%的合格产品。这些方法大多被认为是非破坏性的，其中每一种都有自己的优点和缺点，如表1所示。

​		在这些技术中，用于缺陷检测的光学检测方法是工业中最常用的程序之一[3]。光学检测技术可细分为手动光学检测（由人类检测员执行）和自动光学检测（AOI），后者通过使用图像传感器和处理器执行。

​		近年来，图像采集和处理技术的快速发展和有效融合，使AOI技术在各行各业的质量监测和无损检测中比人工光学检测更成功，发生了构造性的转变[3]。质量监测和控制过程的自动化将在未来带来重大的生产力提升。值得注意的是，人工光学检测会增加检测时间，降低精度。[12]、[13]中的作者也表明，人类的视觉检测能力随着枯燥和无休止的常规工作（即疲劳）而下降。另一方面，现代捕捉设备能够检测出微小的缺陷特征和低强度和低对比度的特征，即使是最有经验的检查员也无法用肉眼发现它们。最近的研究还显示，人类无法处理识别颜色缺陷，因为颜色是心理感知，即使它是由物理辐射引发的[14], [15]。自动机器视觉数据采集系统为大规模的观察铺平了道路，有助于为质量分析和保证方法收集统计上可行的信息[16], [17]。Chen和Harlow在[13]中给出了使用AOI代替人工检测的六个生产力和效率理由。把人从枯燥的常规工作中解放出来，节省人力成本，在不利的环境中进行检测，减少对高技能的人工检测人员的需求，对检测信息进行统计分析，为管理和决策提供记录，以及高速生产与高速检测相匹配。除了这些，还可以包括规模、范围、应用和技术的扩展，提供深度、广度和多角度。

​		最近，AOI算法通过与机器学习技术和深度学习的结合得到了进一步加强，有时可以显著提高检测结果和速度[18]，[19]。Timm和Barth在[20]中提出，AOI算法必须满足两个主要要求：100%的检测率和最小的误报率。卷积神经网络（CNN）是最近常用于检测目的的深度学习算法之一[21]。这背后的原因是CNN是专门处理图像数据的。此外，它不需要对图像进行特征提取或预处理。因此，预处理和特征提取过程被嵌入到CNN的隐藏层中。

​		目前，AOI技术被用于许多领域的检测，如食品[22]、纺织[23]、建筑[21]、金属[24]和医疗应用[25]。本研究的目的是回顾和评论过去二十年来在电子工业中进行AOI系统和算法检测缺陷的研究文章。值得一提的是，本综述旨在强调当前电子行业的AOI趋势，并有助于研究人员对该领域的最新发展有一个直观的认识。本综述研究的问题总结在表 2 中。在这篇评论文章中，我们将首先强调AOI系统在电子工业中的应用（第二节）。然后提到并解释在==电子工业中使用AOI调查的缺陷（第三节）==。第四节将讨论AOI系统的硬件设置。==第五节将解释所使用的检查算法==。第六节将讨论工业检测系统中使用的分拣机制。最后，==第七节将讨论AOI系统可能的局限性和未来发展方向==。

		## II. AOI在电子工业中的应用

​		电子行业是发展最快、最具创新性和最具竞争力的行业之一[26]。过去五年，以新兴市场的增长和新产品的推出为特点，导致更多的人购买消费电子产品。2020年，全球消费电子行业的价值为1万亿美元[27]。电子产品的生产涉及许多制造过程，从自动装配线到测试和最后的手工装配[28]。电子产品的尺寸越来越大，如液晶电视机等家用显示设备。或者，手持或可穿戴设备（如智能电话和智能手表）的产品尺寸急剧缩小，因此，对各种尺寸的电子产品的AOI系统的需求与其他行业并无不同[29]。

事实上，与其他行业相比，电子行业面临的挑战更为严峻，因为电子产品和制造计划发展迅速，而且电子产品的生命周期往往很短[30]。这些挑战要求相应地改变工艺参数。所有这些变化（无论是突然的还是长期的）都会导致产品的缺陷，因此，质量保证和工艺改进在电子行业是非常重要的。

根据Xie等人在[31]中的说法，在电子制造业中，缺陷是一种可能不足以确保最终产品的形状、配合或功能的状况。



​     在本节中，我们报告并评估了由传感器检测到的可见缺陷特征过渡和转化为视觉系统自动提取特征、分类和评估部件的数据过程的历史演变。



​		近年来，对在PCB上以更高的密度放置电子元件的要求越来越高[136]。这些元件通过电子装配线进行组装，这些装配线被应用于所有电子产品的制造，如电视、数码相机等。制造PCB的主要步骤如下：在PCB上涂抹焊膏，将IC放置在板子上的正确位置，并将板子放在烤箱中，将元件焊接到焊盘上。[137]. 在PCB的制造过程中，每个阶段都可能出现各种缺陷，大多数缺陷发生在焊接和元件放置阶段，如图11的饼状图所示。例如，在IC放置阶段，可能会出现元件缺失、错误或加倍的缺陷情况。就可能出现的焊接缺陷而言，大部分发生在回流阶段之后，如IC封装元件的缺陷（伪接、多余的焊料、焊料不足、移位、焊料和桥接缺陷）和非IC元件的缺陷（侧面终止、墓碑式元件、凸起的元件、伪接、多余的焊料、焊料不足、移位、焊料桥接）[138]。这些缺陷会严重影响PCB的功能。例如，焊点缺失或焊点不足会造成PCB的开路，从而影响电路的整体功能。过多的焊点会造成与其他PCB焊点的桥接，从而导致短路。伪焊点（也称为冷焊点）被认为是一种复杂的检测缺陷[139]；这种缺陷发生在焊点终端似乎与电子元件相连；然而，没有发生物理连接，可能导致开路接触。当施加的热量不足以完全融化焊料时，就会形成假性连接[140]。图10显示了PCB行业中普遍调查的缺陷。

​		电测和人工视觉检测测试仍在使用；然而，在PCB组装过程中引入表面贴装技术(SMT)，使得PCB电路更加精细和复杂，这使得前面提到的缺陷更容易发生，突出了AOI系统的必要性[142]。

​		事实上，事实证明，大约80%的光学可识别缺陷不能被电学识别[143]。因此，许多研究人员利用AOI技术研究了不同类型的PCB缺陷。因此，PCB板的AOI是电子工业其他方面中最古老的课题之一。Chin等人在[144]中可以说是最早将AOI用于PCB的研究者之一。大多数使用AOI研究PCB缺陷的研究文章都考虑了焊点缺陷和使用SMT的IC元件放置，如表6所示。很少有研究考虑IC标记检查。在集成电路标记检查中，错误的方向或标记将导致集成电路在PCB上的错误放置[145]。检查必须识别打印错误，如难以辨认的字符、缺失的字符和颠倒的打印，这些错误经常由于机器的故障而发生[146]，[147]。一个典型的工业版检查系统每小时要检查约7,300-7,500个集成电路芯片，这证明需要一个AOI系统来处理检查任务[146]。

​		大多数研究者都集中在检测SMT焊点上，Fonseka等人在[148]中检测了通孔技术（THT）焊点。与SMT相比，THT元件的体积较大的封装具有更高的定位公差，并从PCB的另一面进行焊接。THT连接的焊点具有高反射的金属表面，因此对于典型的基于光的轮廓测量系统来说是一个非常具有挑战性的对象[149]。Fonseka等人进行了4项研究来调查THT焊点缺陷。其中三项研究[150]-[152]集中在提取特征和创建颜色模型用于焊盘和焊点检测。而第四项研究[148]是一个延续性的方法，重点是对焊料桥接、钻孔区域的空隙、焊盘区域的空隙以及焊点上的多余焊料进行自动焊料质量分类。据他们说，THT焊点检测必须在6秒内进行，以满足生产要求。然而，他们的检测系统需要8秒，这可能会影响其在在线检测任务中的实施能力。

​		印刷电路板的金手指也是文献中视觉检查的部件之一；金手指是在印刷电路板边缘发现的连接终端，以实现多个电路板之间的连接。它们可以由金与镍或铜材料结合制成。像PCBs的所有其他部分一样，金手指容易出现许多种缺陷。Jiang等人在[153]中考虑了4种类型的金手指缺陷：擦伤、沾锡、暴露的镍和未电镀缺陷。Jiang等人在[154]中考虑了鼓包、粗糙和湿镀金手指的检查。Tsai等人在[155]中考虑了针孔、铜暴露、以及镀金表面的划痕和粗糙等缺陷。同样地，在文献中发现的许多文章都考虑了PCB的痕迹缺陷。Ibrahim和Al-Attas在[156]中是考虑这些类型缺陷的研究之一。在他们的调查中，他们把发生在这一领域的缺陷分为两类，即功能缺陷和光学缺陷。功能性缺陷严重地造成了对PCB的损害，也就是说，PCB不能按需要发挥作用。

​		视觉缺陷在短期内不会影响PCB的功能。但从长远来看，由于PCB线路的形状不当，可能会导致潜在的缺陷，因此PCB的性能将不会很好。本研究考虑了14种功能和视觉缺陷：断路、短路、针孔、错误尺寸的孔、开路、导体太近、蚀刻不足、假铜、老鼠咬、过度短路、导体缺失、孔缺失、刺穿和蚀刻过度。

​		与PCB类似，球栅阵列（BGA）是一种SMT封装，用于电子产品中安装电子元件，如IC和微处理器。用于连接的引脚被称为焊球，以网格状排列。BGA封装通常被放置在所需的PCB上的类似网格图案的铜垫上。与传统的安装方法不同，BGA利用底面，而不是IC的周边进行连接。因此，BGA提供了一个增加引脚数量、缩短平均引线长度和提高高速性能的机会。

​		然而，随着焊球的尺寸越来越小，焊球之间的间距越来越短，对元件贴装机的光学测量系统的要求也越来越高[157]。因此，许多研究人员考虑对BGA制造和贴装过程中可能产生的缺陷进行检测。表6总结了根据PCB零件和缺陷类型，使用AOI系统进行缺陷检测的研究文章。

​		与传统表面光学系统（如热成像和X射线）一起使用替代成像方法的势头也越来越大。例如，用于IC组件和PCB内层的对准和缺陷检查的X射线扫描，如图32（a）所示。然而，由于缺陷中的小气隙不会减弱X射线，因此X射线技术在检测细小裂纹和开放焊点方面并不有效。尽管3D X射线系统（例如CT）可以解决其中一些问题，但数据处理和图像分辨率可能会减少其在嵌入式过程生产系统中的部署[209]。在热成像中，使用带有热传感器的相机来测量来自样品的红外辐射，并将辐射通量转换为温度。然后可以以热图像的形式示出温度分布。对于检查应用，一些缺陷（如焊球缺陷）会改变热流，导致异常热行为，这取决于缺陷尺寸、位置和材料的热物理性质，如图32（b）[209]所示。在这种情况下，热成像检查被认为是突出这些缺陷以便进一步分析和分类的有效工具。与前面提到的技术不同，电路探针不需要图像传感器来操作，因为缺陷图（WM）是根据电路探针提供的数据生成的。如第III-B节所述，该技术广泛用于半导体晶片检查，如图31（a）所示。表10总结了文献中用于AOI的其他图像采集技术和辅助系统。

		## 五、 检查算法

​		大多数传统的检查系统使用相减或模板匹配技术来将被检查部件与参考模板图像进行比较，如第V-B3节所示。选择合适的检查算法可以增强分类过程，避免逃逸和误报率。通常在AOI应用中，在应用检查算法之前，收集的图像必须经过一些增强（预处理）。然后使用特征提取和选择技术来分割缺陷区域并发现重要的缺陷特征。最后一个阶段是将处理后的信息提供给分类器算法，如图16所示。

		#### A、 预处理

​		该阶段的目的是为下一阶段的特征提取和选择预处理原始图像[310]。该阶段涉及许多操作，如图像掩蔽、空间滤波和几何变换。掩蔽操作可以应用于所获取的图像，以便定义感兴趣区域（ROI）。这一步骤对于减少检查时间非常重要，使得特征提取仅应用于特定区域而不是整个图像。在指定ROI之后，在应用检查算法之前，可以对得到的图像进行几何变换或/和滤波以进一步增强。几何变换涉及计算ROI中每个像素到另一个空间的投影。这种方法有助于在任何几何失真的情况下进行图像恢复和校正。几何变换包括图像的缩放、旋转和平移[189]。

​		图像去噪和滤波是在使用特征提取算法之前对采集的图像进行预处理的常见做法。图像数据滤波和去噪的过程减少了噪声并增强了数据以突出重要特征。它们可以对图像进行平滑、锐化、变换和去除噪声，从而使检测算法可以轻松地完成特征提取任务。例如，图像滤波和去噪技术在从混合模式WM中去除随机缺陷方面非常有用，以便分类算法可以根据系统模式指定缺陷类型[109]。滤波器的数学应用可以是线性或非线性的形式。在线性滤波器的情况下，指定了卷积核，它可以是正方形（例如3×3），也可以是矩形（例如3 x 5）。线性滤波器的例子有拉普拉斯滤波器和高斯滤波器。非线性滤波器使用非线性函数作为内核的参数，重新计算像素的过程与线性滤波器类似。非线性滤波器的一些例子是中值滤波器和Prewitt滤波器。中值滤波器是电子设备检查应用中常用的异常检测预处理方法[71]。文献中还使用了更先进的去噪技术，如深度学习模型[322]、低秩近似[323]和加权核范数最小化[324]。Park和Kweon在[234]中从AMOLED样本图像的背景中提出了称为相邻差分滤波器（NDF）的新滤波技术。NDF用于将相邻像素区域的强度与战略性放置的间隙空间进行比较，以将相似图案与其他图案区分开来（即异常检测）。

### B、 特征提取和选择

​		特征提取过程涉及应用一种或多种图像处理技术（例如频率分析和分割），以描述所研究区域的特征（例如缺陷和异常）。这些特征通常使用一组称为特征V值的值来描述，这些值可以以向量或矩阵形式表示。特征选择步骤的目的是仅考虑有助于分类过程的重要特征值，并丢弃冗余特征值。这一步骤对于减少检查算法的计算时间非常重要。

​		用于特征选择的流行技术。其他算法如遗传算法（GA）、粒子群优化（PSO）、蚁群优化（ACO）、Adaboost和神经网络也用于此目的。

##### 1） 频域分析

​		频域分析可用于将图片从空间域转换到频域。这对于捕获图像的全局结构和最小化重建误差非常有用。在频率分析中，可以使用高通和低通频率滤波器来衰减图像中不必要的噪声。在衰减之后，可以将图像变换回空间域以进行进一步处理。频率分析优选地用于调查具有低对比度和高照明噪声的缺陷，使得空间域不能捕捉缺陷的特征。具有这些特征的缺陷示例如图12所示的Mura缺陷和图14所示的陶瓷电容器中的波纹缺陷。频率表示可通过各种变换函数获得，如快速傅里叶变换（FFT）、离散小波变换（DWT）和离散余弦变换（DCT）。变换函数允许从空间域到降维特征空间的不可逆变换。因此，有助于以显著较少的特征和可管理的分类误差进行分类。

​		DCT主要用于通过将图像转换为频谱来执行图像重建和降维，并衰减分布在两个主要频带（即低频和高频）中的某些系数[125]。在大多数AOI应用中，由于照明变化主要位于低频带（在频谱的左上角），因此低频带中适当数量的DCT系数被截断，以最小化不同照明条件下的变化，如图33[161]所示。Chen和Kuo在[240]中应用DCT和背景图像滤波策略来检测TFT-LCD中的Mura缺陷。首先使用DCT方法在低通滤波的帮助下定位和重建样本图像的背景，以照亮不需要的噪声。

​		然后选择DCT系数，并且可以使用逆DCT将图像变换回空间域。然后可以使用图像减法从背景中减去Mura缺陷。尽管斑点Mura缺陷和背景之间的亮度和不均匀性略有差异，但所提出的方法在检测斑点Mura瑕疵方面也非常有效。然而，由于进行了低通滤波步骤，可以用噪声消除微缺陷。因此，所提出的方法不能处理TFT-LCD中的微缺陷检测。即使对其进行了修改以检测微缺陷，该过程的计算时间也将很长。Perng和Chen在[236]中使用DCT来突出FPD（如PLED和OLED）中的缺陷特征定向纹理表面。使用DCT将样本图像变换到频域，使得纹理的主导方向与频率图像的较低频带系数紧密结合。然后通过将DCT域中与高能量相关联的线性基元减少到零来消除它们。之后，使用逆DCT将图像变换回空间域，这使得缺陷特征可见。然后使用阈值和统计过程控制（SPC）图对缺陷进行分类。使用该方法观察到了几个优点，即它对水平和垂直移动、照明变化和图像旋转不敏感。然而，这项研究没有提供任何关于所提出方法的准确性和所消耗的计算时间的细节。类似地，Lin在[298]中使用DCT来研究在无源电子元件中发现的表面阻挡层中的微小表面缺陷，其随机表面纹理不包含基本纹理基元的重复。因此，DCT方法非常适合应用于这个问题，因为它不需要任何纹理特征信息。所提出的方法实现了94.74%的相对较高的总体精度。然而，该方法仅适用于检测2至14个像素范围内的缺陷。此外，这种方法被认为是耗时的，因为在不进行分类的情况下，只需四秒钟就可以应用正向和反向DCT。Lin和Chiu在[38]，[40]中分别使用块离散余弦变换（BDCT）来突出LED环氧树脂圆顶中的微小表面缺陷和弯曲LED透镜的瑕疵的缺陷特征。BDCT方法类似于DCT；然而，在BDCT中，图像被划分为大小相等的非重叠图像块，DCT可以在每个块中单独进行，而不是将DCT应用于整个图像。

​		在这两项研究中都发现，图像的暗背景会影响BDCT，并可能与缺陷特征相混淆。因此，在指定ROI后，使用图像掩模来描绘ROI。由于BDCT只能处理矩形区域，而ROI是圆形的，因此可以用复制ROI平均灰度的背景替换已移除的暗背景。

​		不均匀的自发光将导致渐变阴影，这将在执行BDCT后导致高频峰值。因此，使用灰色关联分析来衰减高频值，然后在衰减之后将图像再次变换到空间域。然后使用Otsu thresolding将生成的图像转换为数字图像，并检测到突出的缺陷。Lin和Ho在[125]中发现，在将晶片中芯片的数字图像转换到DCT域之后，针孔缺陷的频率在中高频区域周围扩散。因此，为了突出针孔缺陷特征，高通滤波用于通过将非缺陷区域的频率分量的值设置为零来衰减其频率分量。与[38]、[40]中为适应DCT实现的背景而进行的方法类似，所提出的方法对光变化不敏感，因为低频带已被消除。然而，该方法存在缺陷大小、背景属性和处理时间等限制。低频带衰减后，会丢失大尺寸特征的缺陷。此外，由于该方法适用于识别随机纹理中的缺陷，因此无法检测结构纹理中嵌入的缺陷。最后，所提出的方法需要4秒来处理正向和反向DCT变换，这不能满足在线检测系统的要求。

​		如前所述，DWT是用于特征提取的频域分析方法之一。DWT的优点是提供了一种简单的多分辨率表示方法，从中可以容易地提取缺陷纹理特征。使用DWT的优点包括局部图像处理、简单计算、高速处理和多图像信息。Lin在[36]中考虑了一种称为Haar变换的小波变换，以突出LED芯片表面的水滴缺陷。哈尔变换被认为是小波变换中最简单的方法。对每行像素值执行变换，然后对每列执行另一小波变换。使用四个小波变换生成四个子图像；一级小波分解生成一个平滑子图像和三个细节子图像，它们包含具有水平、垂直和对角方向的精细结构。每个子图像表示具有原始图像的列数和行数的一半的特定特征。Wu等人在[218]中使用傅里叶变换通过去除背景纹理来突出TFT-LCD的微缺陷。Haar小波变换也被用于消除不均匀照明的影响。Ferreira等人在[217]中利用了周期性，并在阈值的帮助下使用傅里叶滤波技术来突出FPD中的点缺陷。本研究中考虑的因素是点的发光强度，因此缺陷点可以通过对其寻址数字值的预期光功能响应的变化来识别。这项研究的主要优点是，它能够使用相机构建AOI系统，该相机的分辨率比所检查的显示器的分辨率低。

​		然而，当缺陷的频率分量可能不具有重复图案时，使用傅里叶变换检测缺陷存在限制[260]。Tsai和Hung在[251]中提出了一种基于傅里叶重建和小波变换的系统，用于检查TFT-LCD中的针孔、划痕和颗粒等微观缺陷。本研究使用一维线图像代替传统的二维区域图像。可以消除表示频谱中图像的周期性结构图案的不需要的频率分量。使用傅里叶逆变换，可以将图像变换回空间域。最后，进一步应用小波分解来去除滤波图像中的不均匀照明，从而可以容易地分割缺陷以进行分类处理。使用特定阈值来区分异常和均匀背景，为分类过程考虑了控制限。在类似的研究[252]中，Tsai等人采用了一种稍微不同的方法，将分割的1D轮廓图像分成小段，每个小段都是给定TFT-LCD面板重复周期的长度。然后将分割的1D片段组合为2D图像。然后，与先前研究中的1D图像相同的程序应用于2D图像。这项研究的另一个不同之处是，它没有使用小波变换。所提出的方法的主要优点是不依赖于定量特征的设计来描述各种缺陷类型，也不需要模板图像来进行比较。因此，它们减轻了特征提取和模板匹配方法的所有限制。然而，在[252]中观察到了一些缺点，例如，由于分割段的数量相对于扫描线中的周期长度通常很小，因此无法有效地消除无故障扫描线的周期性。此外，所提出的方法依赖于旋转，且计算密集[253]。在检查由同一第一作者进行的前两项研究时，发现了一个矛盾的说法。在Tsai和Huang[251]中，他们声称他们能够成功地检测高分辨率图像中的微小缺陷。然而，在Tsai等人[252]中，他们提到先前的研究在检测高分辨率图像中的微缺陷方面不成功。Tsai和Zhuan提出了另一种类似的方法，该方法处理1D轮廓图像以识别TFT-LCD面板的微缺陷，以及[253]。该方法集成了归一化互相关（NCC）方法，通过将图像片段与其两个相邻片段进行比较来识别异常。与前两项研究相比，该方法减少了考虑的分段数，从而减少了计算时间。然而，与先前研究中的情况一样，所提出的方法无法定位缺陷的准确位置和形状。

		### 深度学习

​		深度学习最近已成为机器视觉和模式识别问题中最具影响力的技术[383]。深度学习概念涉及使用深度神经网络（DNN），它可以处理机器视觉问题中的特征提取和分类方法。DNN被认为是一类神经网络；然而，使任何ANN被认为是DNN的主要区别是DNN由三个或更多的隐藏层组成。此外，DNN几乎不需要预处理和特征提取，因为这些过程嵌入在网络本身中。与节点数量相比，DNN还使用大量的层来实现高度非线性的功能。DNN从可用的特征中学习新的有用表示，这些特征捕获了数据本身存在的基本统计规律，然后可以为分类、回归和信息检索中的特定问题制定表示特征。在特征设计中独立于先验知识和人类努力是一般深度学习和DNN[384]的主要优势。对于本文所述的AOI应用，DNN使用以下方法实现：自动编码器和卷积神经网络（CNN）。

​		在DNN中，一组模型用于学习数据中的高级抽象表示，如自动编码器（AE）、去噪自动编码器（DAE）和堆叠去噪自动编码（SDAE）[93]。AE是一个包括编码器和解码器的三层网络。编码器将来自高维空间的输入数据映射成低维空间中的代码，并且解码器从对应的代码重构输入。AE可以通过最小化输入数据和输出之间的重构误差，以无监督的方式学习特征。然而，AE的固有问题，例如简单地将输入层复制到隐藏层，使得提取有意义的特征并不有效，即使其输出可以是输入数据的完美恢复[385]。另一方面，DAE将损坏的数据版本作为输入，并对其进行训练，以从损坏的数据中重建或去噪原始输入，这可以防止AE仅仅学习输入和重建的输出之间的身份映射，并捕获更多信息的隐藏模式，并从噪声特征中获得鲁棒和强大的表示。DAE还包括编码器进程和解码器进程。几个DAE可以堆叠在一起，形成一个深度网络，并学习高级表示，称为SDAE。因此，SDAE被认为是一类特殊的DAE，其中随机噪声被添加到AE的输入层，然后训练它以输出相同的输入而无噪声。通常，SDAE的训练过程包括无监督的预训练步骤和有监督的微调步骤。AE家族的另一种流行类型是稀疏自动编码器（SAE），它被认为是自动编码器的变体，它减少了隐藏层中使用的神经元，因此这些神经元被认为是不活动的，不会开火。这可以提高传统自动编码器的性能，并显示出更实际的应用价值[384]，[386]。因此，自动编码器通常不具备自行分类的能力，通常与其他深度学习层（如CNN）集成以实现分类的目的[387]。Yu在[93]中提出了用于检测WM缺陷的检测和识别系统，该系统基于SDAE的改进版本，称为增强堆叠去噪自动编码器（ESDAE）。

​		他们还将流形正则化集成到学习过程中，由于保留了数据中的固有信息，从而有效地提高了算法的性能。所提出的方法的总体检测精度达到89.6%，这克服了用于比较的其他方法，如SDAE、DBN、BPN和LR。然而，由于使用了大量参数，深度自动编码器通常很容易受到小样本过拟合的影响，这限制了深度自动编码器学习有效特征的泛化能力[388]。Lee等人在[389]中也提出了类似的方法来评估晶圆的质量。然而，使用传感器数据代替WM，这超出了本审查的范围。在提出用于检测WM缺陷的检测和识别系统的类似研究中，Y u等人在[91]中集成了SDAE和CNN，以形成一种新的深度学习模型，称为堆叠卷积稀疏去噪自动编码器SCSDAE。所提出的新模型可以学习有效的特征并逐层累积鲁棒性，该模型采用SDAE作为特征提取器，并以卷积方式堆叠设计良好的全连通SDAE，以获得更鲁棒的特征表示。本研究和其他使用相同数据集的研究所面临的挑战是数据的不平衡，为了处理这一问题，通常使用欠采样和过采样方法来处理高度不平衡的数据集。欠采样随机消除了大多数类的实例，而过采样增加了少数类的实例数量。它们的目标都是获得近似相同数量的类实例。本研究中的检测准确率在模拟情况下为95.13%，在工业情况下为94.75%。结果与其他分类算法（如SDAE、AlexNet、DBN、SVM、BPN、k-NN和C4.5）进行了比较，并在模拟和工业案例中优于所有分类算法。然而，训练数据有限的问题将导致SCSDAE的过度拟合。此外，由于WMs中某些模式的标记数据稀缺，SCSDAE在不平衡数据集上实现模式识别是一个具有挑战性的问题。

​		数据不平衡和缺乏训练数据是我们前面讨论过的主要问题。在某些情况下，诸如旋转、镜像和缩放等传统图像增强技术可以克服这些问题。然而，由于这些技术仅操作真实数据集，而没有为数据提供新的见解，因此可能会出现分类结果的不准确和过度拟合。Goodfellow等人在[390]中提出了可用于数据扩充的GAN，以生成更多数据用于训练。最初提出的模型由两个网络组成，即生成器和鉴别器。这两个网络同时训练，并在一个极小极大博弈中相互竞争。生成器被训练为通过合成真实样本来欺骗鉴别器，而鉴别器被训练为为合成样本配备高鉴别能力。这些网络相互补充，有助于理解原始数据分布，为即将到来的分类算法提供了新的视角。

​		然而，两个网络的训练可能非常不稳定，可能会出现模式崩溃问题[391]，[392]。Wang等人在[94]中提出了一种改进的GAN模型，该模型与CNN和其他深度学习模型相结合，称为自适应平衡生成对抗网络（AdaBalGAN），用于识别WMs中的缺陷模式。该算法是为了增强对不平衡数据集的分类结果而专门提出的。此外，该研究提出了一种条件分类生成对抗网络，通过生成少数缺陷模式的模拟实例来重新平衡WM数据集。前一过程涉及三个部分；第一部分是由对真实WM样本进行分类的CNN组成的模式识别模型，第二部分是由根据来自第一部分的真实样本生成模拟WM的CNN构成的生成模型。最后，在最后一部分中，使用经典的CNN（Le-net5）来比较真实晶圆和模拟晶圆，并保证它们之间的相似性。所提出的方法对某些模式具有较高的分类精度（高达100%），并且还优于与之相比的其他算法，如SVM、Adaboost、CNN和GAN。Kim等人在[255]中提出了一种基于CNN、叠加集成模型和MLP的算法，以对四种类型的TFT-LCD缺陷进行分类。

​		在他们的调查中，他们注意到与背景中的图案化面板相比，缺陷的大小非常小。因此，他们提出了一种特征提取方案，通过应用三个步骤来消除背景中的模式，以获得更好的分类结果：找到每个面板图像的节距，计算每个像素的节距差分值，并应用阈值。本研究提出了一种算法，通过使用多个MLP和CNN模型来检查使用模式消除技术的效率。他们的分类总体准确率为86.13%。然而，他们没有提到算法所需的时间，因为他们使用了太多可能会影响计算时间的模型。Mei等人在[215]中提出了一种方法，该方法将手工特征和基于无监督深度学习的特征相结合，以检测TFT-LCD中的Mura缺陷。该方法被命名为基于联合特征表示的缺陷识别框架（JFR-DRF）。多种无监督算法适用于基于无监督深度学习的特征提取部分；然而，SAE算法被用于证明其能力。使用类似于GLCM技术的方法提取手工制作的特征，该方法需要基于灰度直方图的熵和各向异性系数等系数。然后，由这些部分提取的特征将被合并为单个特征向量，作为Mura缺陷图像的表示。在后续处理之后，将使用一对所有SVM分类器对其进行分类。在这项研究中，统计结果证明，手工和无监督的特征提取相结合的性能优于仅使用其中一种的性能。然而，融合的特征表示也可能受到来自不适合任务的模态的差表示的影响。此外，基于深度学习的方法可能需要大量的计算资源和时间来执行训练和推理[244]。Mei等人在[250]中提出了一种检测纹理表面缺陷的算法，例如LCD面板、瓷砖和纺织品。其中Mura缺陷是本文研究的LCD面板缺陷之一。该算法通过使用多尺度卷积DAE（MSCDAE）重建图像块来实现。MSCDAE方法使用三层金字塔来执行多尺度缺陷检查。本研究仅使用无缺陷样本进行模型训练，因为收集和标记大量缺陷样本非常麻烦。然而，他们的方法需要为每个层训练和测试单独的模型；因此，这是耗时的，并导致过度的内存消耗。他们的方法实现了合理的召回，但精度相对较低[256]。Y ang等人在[256]中克服了先前研究中的局限性，提出了一种基于全卷积自动编码器方法（MS-FCAE）的算法，以检查包括TFT-LCD缺陷在内的纹理表面缺陷。该算法可以基于少量无缺陷产品样本（50个无缺陷样本）准确地分割各种类型的产品表面缺陷。TFT-LCD缺陷的数据样本包括点缺陷、线缺陷和区域缺陷。他们的检查结果表明，所提出的算法同时准确地检查所有类型的TFT-LCD缺陷，因为它实现了98.1%的召回率和92.1%的准确率，而与所提出的方法相比的其他缺陷检查方法仅适用于某些类型的缺陷。此外，与[250]中使用的MSCDAE相比，MS-FCAE根本不需要冗余计算。Jo和Kim在[286]中提出了一种正则化的自动编码器算法，作为一种特征提取方法，以将图像背景与缺陷区域分离，用于检查移动设备的显示器。本研究着重于将它们的方法与基于相似特征提取和降维的低秩近似分离方法（特别是SVD）和基于分割的方法进行比较。他们已经表明，他们提出的方法能够检测从高可视性（例如，微弱的点型缺陷）到不清晰可见的缺陷，因为与背景的强度差很小，例如Mura缺陷。另一方面，前面提到的方法未能检测到这些缺陷。尽管SVD在计算时间方面优于所提出的方法，其平均时间为183ms，而所提出方法的平均时间为313ms。在这项研究中还观察到许多缺陷，例如在模拟缺陷图像中，没有考虑重叠缺陷。此外，由于计算资源的限制，该方法只处理700×990大小的图像，因此需要重复检查移动设备图像的几个部分。

​		DNN的一个特殊情况是矩阵乘法包括卷积滤波操作，这在设计用于图像和视频分析的DNN中很常见。这种模型被称为卷积神经网络（CNN）[18]。近年来，神经网络因其高图像识别能力而广为人知[21]，[25]。通常，基于CNN的方法在成像应用中是优选的，并且由于许多因素，与传统方法相比可以获得更精确的结果，例如：；有效捕获图像的网格状拓扑结构，由于使用了池和卷积层，减少了计算时间，能够区分大量类别，并自动学习图像特征，而无需使用图像处理工具进行特征提取[393]。AlexNet[394]、VGG[395]、ResNet[396]和DenseNet[397]等神经网络在特征提取和图像分类方面取得了显著的成就，其性能优于SVM等传统分类模型。因此，在AlexNet被提出[383]之后，CNN被应用于光学缺陷检测问题。典型的CNN由输入层、卷积层、池化层、完全连接层和输出层组成，如图44所示。卷积层和池化层（分别执行卷积和池化操作）是区分CNN和其他类型NN的主要元素。在CNN中，池化层位于两个连续的卷积层之间，输出层跟随最后一个完全连接的层，该层连接前一层中的所有隐藏单元。通过在整个输入阵列中执行三个操作，卷积层在从输入图像中提取特征方面起着重要作用。首先，它在输入图像的子图像阵列（其大小等于内核）和具有随机权重的内核之间执行逐元素乘法（也称为点积）。其次，此操作的输出将添加到偏差中，并生成所谓的特征图。内核的初始权重是随机生成的，而偏差可以根据网络的配置来设置。可以定义合适的步长，以确定内核可以在输入图像上滑动多少像素。在选择步长时必须仔细考虑，因为较大的幻灯片可以减少计算时间，但也可能会丢失输入图像中的重要特征。另一方面，池化层在改进图像分类方面很重要。它通过减少输入图像阵列的空间大小来最小化计算时间[398]。这个过程通常称为下采样。为此，有两种广泛使用的池函数，即最大池和平均池（也称为平均池）。Lin等人[47]使用CNN（称为LEDNet）检查LED芯片缺陷。他们在分析中考虑了两个缺陷：线条瑕疵和划痕。他们使用的LEDNet由六个卷积层、三个最大池化层、一个平均池化层和一个完全连接层组成。使用平均池来突出每个特征的重要性，并借助于关联权重和完全连接层中的类激活映射，将它们与正确的类（线瑕疵或划痕）相关联。由于缺乏真实的缺陷LED芯片样本图像，并且CNN需要大量数据才能有效，因此，为训练CNN提供的数据集是使用几何变换技术生成的，该技术通过调整后的图像模拟缺陷。旋转、翻转、移位、噪声和模糊效果在调整后的图片上随机进行，以模拟真实情况。芯片1和芯片2的缺陷分类不准确率分别为5.04%和5.51%。他们提出的方法与[45]中使用的算法进行了比较，芯片1和2的错误率分别为14.53%和11.97%，是LEDNet中使用的错误率的两倍多。

​		尽管这项研究得到了相当低的不准确度结果；然而，他们的算法仅限于对两种缺陷进行分类。此外，没有证据表明他们为训练集调整的图像能够模拟缺陷芯片的真实情况。Y ang等人在[41]中使用CNN来评估LED杯孔的直径。由于不需要特征提取来为CNN提供信息，因此图像被直接用作网络的输入神经元。该网络由五个卷积层和两个完全连接的层组成。从捕获的图像中使用网络的训练样本，将图像的每个样本旋转90◦ 对每个图像应用四次水平翻转以进一步增加网络的训练样本。不合格杯子的检出率为100%，误报率为8%。然而，对大型标记数据集的需求可能会限制其应用[399]。对于半导体晶片检查，Kyeong和Kim在[104]中使用了CNN进行分类，其中他们将WBM视为大小为56×53的0和1的输入二进制矩阵。在他们的研究中，使用了三个卷积层、三个池化层和一个具有ReLU和softmax激活函数的完全连接层。他们提出的用于分类的CNN模型旨在检测同一晶片上的多个缺陷。为了做到这一点，他们为每个缺陷类别提出了四个单独的CNN分类器，以这样的方式，当在晶片上混合几个缺陷图案时，每个分类器确定是否存在相应的图案。这种方法的主要缺点是，为了检测混合模式缺陷，必须获得每个单独分类器的输出[400]。Cheon等人在[134]中提出了类似的方法。本研究中提出的CNN模型可以从使用SEM获得的真实晶片图像中提取特征，并将输入数据准确地分类为五种不同的晶片缺陷类别。他们的模型还可以通过将CNN模型与k-NN分类器相结合来对未知缺陷类别进行分类。然而，本研究中使用的数据高度不平衡，没有提出任何解决方案来缓解该问题的结果[401]。Nakazawa和Kulkarni在[106]中也使用具有三个卷积层、三个汇集层和两个完全连接层的CNN进行晶片检查。输入晶片图像大小为286×400。为了评估CNN性能，除了针对22个缺陷类别的1191个真实晶片外，还生成了28600个WBM图像，这将测试精度提高了98.2%。然而，CNN模型的训练和验证高度依赖模拟数据，因为真实数据高度不平衡。此外，本研究没有提供任何关于缺陷集群、大小及其位置的信息。在同一作者于[107]进行的后续研究中，Nakazawa和Kulkarni使用不同类型的CNN模型，如完全卷积网络（FCN）[402]、SegNet[403]和U-Net[404]，克服了信息不足的问题。对这些模型的分类性能和训练时间进行了比较。FCN的主要概念是用卷积层替换典型分类神经网络的完全连接层，以便网络输出可以是二维热图，而不是多组类。在FCN中，浅层的输出被合并到更深的层，以便网络可以维护本地和粗略信息。SegNet被设计为一种用于像素级语义分割的有效架构，它由编码器网络、相应的解码器网络以及像素级分类层组成。每个编码器和解码器网络由13个卷积层组成。解码器使用在相应编码器的最大池化步骤中计算的池化索引来执行非线性上采样。由于位置或边界信息在编码器网络中的最大池化操作期间丢失，因此保持解码器网络中每个上采样操作的位置信息对于精确的逐像素分割至关重要[403]。U-Net在具有编码器-解码器架构方面类似于SegNet；然而，U-net不是在最大池化步骤中使用池化索引，而是将每个编码器层中的特征图复制并裁剪到相应的解码器层，以维护本地位置信息。对于分割问题，维护局部信息是关键，这样每个架构都有自己的方式将局部细节从较浅的层传递到较深的层。SegNet和U-Net模型在具有预定义类别和未发现缺陷的WMs分类方面优于FCN。然而，他们需要比FCN更长的训练时间。Yu等人在[92]中构建了一种基于CNN的算法来识别和分类WM缺陷。提出的方法分为两种并行方法：离线建模和在线处理。在离线建模阶段，构建了由两个子模型组成的晶片缺陷模式识别模型。这两个子模型基本上是两个神经网络，其中一个负责晶片缺陷模式检测，另一个用于晶片缺陷模式分类。两个CNN都由三个卷积层和三个池化层组成，而检测CNN由两个FC层组成，分类CNN由三个FC层构成。两种神经网络均采用了丢弃法，以避免过度拟合。此外，在第二FC层之后，使用PCA方法对CNN进行分类，以降低特征维数，然后对特征进行归一化。在在线处理阶段，WM被预处理并用作两个CNN模型的输入。在他们的研究中注意到，与分类CNN相比，检测CNN具有简单的结构和快速的计算速度，这是由于实际制造过程中工艺故障的概率较低。他们提出的方法实现了93.13%的平均检测精度，这超过了用于比较的其他算法的精度。然而，使用PCA进行特征约简是多余的，因为CNN能够考虑重要的特征并丢弃不必要的特征。

​		大多数使用CNN研究WM缺陷的研究人员都在使用模拟数据来解决WM模式缺陷识别中的噪声和不平衡数据问题。通过这种方式，它们可以提高分类精度，但这会变得昂贵和耗时。

​		此外，对实际数据进行去噪会破坏晶片图像上的实际缺陷图案[60]。Cai等人在[175]中使用三种类型的CNNs检查了PCB中的SMT焊点缺陷。整个样本图像被馈送到第一个CNN（称为CNN-1）。从整个图像中手动选择代表ROI的子区域，并将其馈送给第二个CNN（称为CNN-2）。CNN-2的输出被用作第三个CNN（称为CNN-3）的输入。CNN-1和CNN-3的输出用于SMT焊点的分类（良或劣）。分类的概念取决于两个CNN的加权部分和每个CNN的概率。使用该方法的检查结果与其他方法（如Bayes、SVM、G-MLP、GMM和ViBe）进行了比较。实验结果表明，该方法明显优于其他方法。然而，他们的方法将焊点分类为好或坏，并且没有考虑对缺陷类型进行分类，这并不证明本研究使用针对多类分类而优化的复杂算法是合理的。Yuan等人在[285]中提出了一种基于CNN的方法来分类移动屏幕玻璃中的IR孔缺陷。为了克服训练数据的不足，他们提出了一种数据生成算法，该算法包括两个步骤：缺陷叠加和数据增强。叠加步骤以随机大小、形状和严重程度在随机选择的位置将缺陷叠加在所选的无缺陷图像上。由单个模板生成的缺陷图像自然具有相同的比例、形状和背景颜色，使得它们不符合实际情况。因此，在叠加步骤之后应用增强步骤以增强生成的缺陷图像的多样性。最后，收集了大量手动标记的真实图像，并用于验证所提出的检测方法。

​		由于复杂和深层结构，CNN需要相对大规模的图像数据、大量超参数调整、高计算能力（如并行GPU）和长训练时间，因为使用了大量标记数据[60]。为了克服这些问题，Yang等人[244]提出了基于转移学习的方法，称为在线顺序分类器和转移学习（OSC-TL），以研究FPD中的Mura缺陷。与传统的CNN不同，传统的CNN假设训练数据和未来数据必须在相同的特征空间中并且必须具有相同的分布，转移学习算法使用现有的大数据集重用先前训练的网络的特征提取器部分，并且仅使用适合于不同分类任务的特定数据集重新训练分类功能。所提出的OSC-TL使用使用ImageNet LSVRC-2012数据集的预训练CNN进行特征提取步骤。然后，使用另外两个模块对缺陷进行训练和分类。将所提出的算法与其他深度学习方法进行了比较，并在保持类似精度水平的同时，在计算时间方面表现出显著的超性能。

表11、12、13、14和15总结了所选研究文章的检查算法细节。





​		还介绍了处理采集图像的检查算法。检测算法的应用主要分为三个阶段：==预处理、特征提取和选择以及分类==。在预处理中，对采集的图像进行了滤波、去噪和几何运算。这对于去除影响分类决策的不需要的噪声非常有用。去噪是从WM模式中去除随机缺陷的关键步骤，以便可以根据系统缺陷对检查的样品进行分类。在特征提取和选择中，该算法试图隔离和定位图像中的缺陷特征。一些统计和几何测量也用于评估缺陷的特征。根据综述的论文，分割和模板匹配是两种常用的特征提取算法。特征选择过程可以减少冗余提取特征的数量，使得算法执行得更快。PCA是最常用的特征选择算法之一。最后，分类是检验算法的决策阶段。基于规则的和基于学习的是两种分类方法。在基于规则的系统中，使用一组预先编程的if-then规则来评估从上一步骤获得的特征。在基于学习的分类中，有监督和无监督的机器学习算法（如k-NN、贝叶斯、决策树、SVM、聚类和ANN）用于分类过程。无监督机器学习算法被广泛用于寻找WM模式以研究半导体晶片缺陷，而监督学习技术被用于其他研究。通常，机器学习算法通过其基于训练过程在输入数据（特征）中发现异常的能力而克服了基于规则的学习，而无需任何定制编程。然而，过度拟合和数据不平衡是使用基于学习的算法的两个主要缺点。这两个问题可以通过为所考虑的每个缺陷类别提供足够的数据或者通过应用诸如正则化和自举之类的若干技术来解决。



































